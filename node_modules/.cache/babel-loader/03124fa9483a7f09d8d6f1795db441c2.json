{"ast":null,"code":"import _defineProperty from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mackyandow/V_School/DEV/memes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from\"react\";import Image from\"./Image\";import axios from\"axios\";import\"./Main.css\";var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);_this=_super.call(this);_this.refresh=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var randomIdNum,resp,randomImg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:randomIdNum=Math.floor(Math.random()*99);_context.next=3;return axios.get(\"https://api.imgflip.com/get_memes\");case 3:resp=_context.sent;randomImg=resp.data.data.memes[randomIdNum];_this.setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{name:randomImg.name,imageUrl:randomImg.url,topText:\"\",bottomText:\"\"});});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.handleChange=function(e){if(!_this.props.selected){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(_defineProperty({},name,value));}else _this.props.handleChange(e);};_this.state={name:\"\",imageUrl:\"\",topText:\"\",bottomText:\"\"};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.refresh();case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(prevProps){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(prevProps.selected&&!this.props.selected)){_context3.next=3;break;}_context3.next=3;return this.refresh();case 3:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidUpdate(_x){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"render\",value:function render(){var _this2=this;var imageProps=this.props.selected?this.props.selected:this.state;return/*#__PURE__*/_jsx(\"div\",{className:\"Main\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Image,_objectSpread(_objectSpread({},imageProps),{},{handleChange:this.handleChange})),/*#__PURE__*/_jsx(\"button\",{className:\"refresh\",onClick:this.refresh,children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{className:\"save\",onClick:function onClick(){return _this2.props.saveMeme(_this2.state);},children:\"Save\"})]})});}}]);return Main;}(React.Component);export default Main;","map":{"version":3,"sources":["/Users/mackyandow/V_School/DEV/memes/src/components/Main.js"],"names":["React","Image","axios","Main","refresh","randomIdNum","Math","floor","random","get","resp","randomImg","data","memes","setState","prevState","name","imageUrl","url","topText","bottomText","handleChange","e","props","selected","target","value","state","prevProps","imageProps","saveMeme","Component"],"mappings":"8xCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,YAAP,C,GAEMC,CAAAA,I,wGACJ,eAAc,sCACZ,wBADY,MAcdC,OAdc,sEAcJ,kKACJC,WADI,CACUC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,EAA3B,CADV,uBAEWN,CAAAA,KAAK,CAACO,GAAN,qCAFX,QAEFC,IAFE,eAGFC,SAHE,CAGUD,IAAI,CAACE,IAAL,CAAUA,IAAV,CAAeC,KAAf,CAAqBR,WAArB,CAHV,CAIR,MAAKS,QAAL,CAAc,SAAAC,SAAS,wCAClBA,SADkB,MAErBC,IAAI,CAAEL,SAAS,CAACK,IAFK,CAGrBC,QAAQ,CAAEN,SAAS,CAACO,GAHC,CAIrBC,OAAO,CAAE,EAJY,CAKrBC,UAAU,CAAE,EALS,IAAvB,EAJQ,sDAdI,SA2BdC,YA3Bc,CA2BC,SAAAC,CAAC,CAAI,CAClB,GAAI,CAAC,MAAKC,KAAL,CAAWC,QAAhB,CAA0B,eACAF,CAAC,CAACG,MADF,CAChBT,IADgB,WAChBA,IADgB,CACVU,KADU,WACVA,KADU,CAExB,MAAKZ,QAAL,oBAAiBE,IAAjB,CAAwBU,KAAxB,GACD,CAHD,IAGO,OAAKH,KAAL,CAAWF,YAAX,CAAwBC,CAAxB,EACR,CAhCa,CAEZ,MAAKK,KAAL,CAAa,CACXX,IAAI,CAAE,EADK,CAEXC,QAAQ,CAAE,EAFC,CAGXE,OAAO,CAAE,EAHE,CAIXC,UAAU,CAAE,EAJD,CAAb,CAFY,aAQb,C,2SAGO,MAAKhB,OAAL,E,0TAuBiBwB,S,2HACnBA,SAAS,CAACJ,QAAV,EAAsB,CAAC,KAAKD,KAAL,CAAWC,Q,kDAC9B,MAAKpB,OAAL,E,uNAID,iBACP,GAAMyB,CAAAA,UAAU,CAAG,KAAKN,KAAL,CAAWC,QAAX,CAAsB,KAAKD,KAAL,CAAWC,QAAjC,CAA4C,KAAKG,KAApE,CAEA,mBACE,YAAK,SAAS,CAAC,MAAf,uBACE,oCACE,KAAC,KAAD,gCAAWE,UAAX,MAAuB,YAAY,CAAE,KAAKR,YAA1C,GADF,cAGE,eAAQ,SAAS,CAAC,SAAlB,CAA4B,OAAO,CAAE,KAAKjB,OAA1C,qBAHF,cAME,eACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACmB,KAAL,CAAWO,QAAX,CAAoB,MAAI,CAACH,KAAzB,CAAN,EAFX,kBANF,GADF,EADF,CAiBD,C,kBA7DgB3B,KAAK,CAAC+B,S,EAgEzB,cAAe5B,CAAAA,IAAf","sourcesContent":["import React from \"react\";\nimport Image from \"./Image\";\nimport axios from \"axios\";\nimport \"./Main.css\";\n\nclass Main extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      name: \"\",\n      imageUrl: \"\",\n      topText: \"\",\n      bottomText: \"\",\n    };\n  }\n\n  async componentDidMount() {\n    await this.refresh();\n  }\n\n  refresh = async () => {\n    let randomIdNum = Math.floor(Math.random() * 99);\n    const resp = await axios.get(`https://api.imgflip.com/get_memes`);\n    const randomImg = resp.data.data.memes[randomIdNum];\n    this.setState(prevState => ({\n      ...prevState,\n      name: randomImg.name,\n      imageUrl: randomImg.url,\n      topText: \"\",\n      bottomText: \"\",\n    }));\n  };\n\n  handleChange = e => {\n    if (!this.props.selected) {\n      const { name, value } = e.target;\n      this.setState({ [name]: value });\n    } else this.props.handleChange(e);\n  };\n\n  async componentDidUpdate(prevProps) {\n    if (prevProps.selected && !this.props.selected) {\n      await this.refresh();\n    }\n  }\n\n  render() {\n    const imageProps = this.props.selected ? this.props.selected : this.state;\n\n    return (\n      <div className=\"Main\">\n        <div>\n          <Image {...imageProps} handleChange={this.handleChange} />\n\n          <button className=\"refresh\" onClick={this.refresh}>\n            Refresh\n          </button>\n          <button\n            className=\"save\"\n            onClick={() => this.props.saveMeme(this.state)}\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}